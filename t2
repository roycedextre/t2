import random

def palabra_aleatoria():
    return ''.join(chr(random.randint(97, 122)) for _ in range(4))

def generar_matriz(n):
    return [[palabra_aleatoria() for _ in range(n)] for _ in range(n)]

def tiene_vocal(palabra):
    return any(letra in "aeiou" for letra in palabra)

def contar_palabras_con_vocal(matriz):
    n = len(matriz)
    if n == 0:
        return 0
    if n == 1:
        return 1 if tiene_vocal(matriz[0][0]) else 0

    mitad = n // 2
    submatrices = [
        [fila[:mitad] for fila in matriz[:mitad]],
        [fila[mitad:] for fila in matriz[:mitad]],
        [fila[:mitad] for fila in matriz[mitad:]],
        [fila[mitad:] for fila in matriz[mitad:]]
    ]

    return sum(contar_palabras_con_vocal(sub) for sub in submatrices if sub and sub[0])

def main():
    while True:
        try:
            n = int(input("Ingrese el tamaño de la matriz (por ejemplo 4): "))
            if n <= 0:
                print("❌ Ingrese un número mayor que 0.\n")
                continue
        except ValueError:
            print("❌ Ingrese un número válido.\n")
            continue

        matriz = generar_matriz(n)
        print("\nMatriz generada:\n")
        for fila in matriz:
            print(' '.join(fila))

        total = contar_palabras_con_vocal(matriz)
        print(f"\n✅ Total de palabras con al menos una vocal: {total}")

        repetir = input("\nDesea ingresar otro número? (si/no): ").strip().lower()
        if repetir != 'si':
            print("✅ Programa finalizado. ¡Hasta luego!")
            break

